---
import BaseLayout from '../../layouts/BaseLayout.astro'
import BlogPost from '../../components/BlogPost.astro';
import { getCollection, render } from 'astro:content';
const pageTitle = "Posts";

// Credit: https://rimdev.io/creating-a-pagination-component-with-astro
export async function getStaticPaths({ paginate }) {
    const allPosts = await getCollection('blog');
    allPosts.sort((a, b) =>
        new Date(b.rendered.metadata.frontmatter.pubDate) - new Date(a.rendered.metadata.frontmatter.pubDate)
    );
    return paginate(allPosts, { pageSize: 10 });
}
const { page } = Astro.props;
---
<BaseLayout pageTitle={pageTitle}>
    <!--<ul>-->
        {page.data.map((post: any) => <BlogPost post={post} frontmatter={post!.rendered!.metadata!.frontmatter} />)}
    <!--</ul>-->
</BaseLayout>